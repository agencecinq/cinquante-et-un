import{d as E}from"./piecesjs-B79wdN2z.js";function A(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var a={exports:{}},b;function O(){return b||(b=1,function(r,j){(function(o,h){r.exports=h()})(self,()=>(()=>{var o={d:(n,e)=>{for(var t in e)o.o(e,t)&&!o.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},h={};o.r(h),o.d(h,{default:()=>$});const c=n=>n.classList.remove("is-active"),d=(n,e={},t="")=>{const s=new CustomEvent(`Panel.${t}`,{bubbles:!1,cancelable:!0,detail:e});return n.dispatchEvent(s)},u="aria-expanded";class f{constructor(e){this.$body=null,this.$button=null,this.$inner=null,this.isDeselect=!1,this.isOpen=!1,this.height=0,this.handleClick=()=>(this.isDeselect!==!1||this.isOpen!==!0)&&(this.isOpen===!0?(d(this.el,{current:this.el},"close"),this.close()):this.isOpen!==!1||(d(this.el,{current:this.el},"open"),this.open())),this.resize=()=>{var t;this.height=((t=this.$inner)===null||t===void 0?void 0:t.offsetHeight)||0,this.isOpen&&this.$body.style.setProperty("max-height",`${this.height}px`)},this.el=e}init(){var e;this.$button=this.el.querySelector(".js-accordion-header");const t=((e=this.$button.getAttribute("aria-controls"))===null||e===void 0?void 0:e.trim().split(" ")[0])||"";this.$body=document.getElementById(t),this.$inner=this.$body.querySelector(".js-accordion-inner"),this.isDeselect=JSON.parse(this.el.getAttribute("data-accordion-deselect")),this.isOpen=JSON.parse(this.el.getAttribute("data-accordion-open")),this.$body.style.setProperty("max-height",this.height.toString()),this.$body.style.setProperty("overflow","hidden"),this.$body.setAttribute("aria-labelledby",`${this.$button.id}`),this.resize(),this.initEvents(),this.isOpen===!0&&this.open()}initEvents(){this.$button.addEventListener("click",this.handleClick),window.addEventListener("resize",this.resize)}close(){this.el.setAttribute("data-accordion-open","false"),this.$button.setAttribute(u,"false"),this.$body.style.setProperty("max-height","0"),c(this.el),this.isOpen=!1}open(){this.el.setAttribute("data-accordion-open","true"),this.$button.setAttribute(u,"true"),this.$body.style.setProperty("max-height",`${this.height}px`),this.el.classList.add("is-active"),this.isOpen=!0}destroy(){this.$button.removeEventListener("click",this.handleClick),window.removeEventListener("resize",this.resize),this.$body.style.removeProperty("max-height"),this.$body.style.removeProperty("overflow"),c(this.el)}}const g={multiselectable:!1};class ${constructor(e,t={}){this.accordions=[],this.panels=[],this.current=0,this.handleHashchange=()=>{this.panels.forEach((s,l)=>!s.$body||`#${s.$body.id}`!==document.location.hash.replace(/^#\//,"")||(this.current=l,this.closeAll(),s.open()))},this.handleKeydown=s=>{const{target:l,key:m,code:w}=s,p=()=>{var i;l.classList.contains("js-accordion-header")&&(this.current=this.current+1>this.panels.length-1?0:this.current+1,(i=this.panels[this.current].$button)===null||i===void 0||i.focus(),s.preventDefault())},v=()=>{var i;l.classList.contains("js-accordion-header")&&(this.current=0>this.current-1?this.panels.length-1:this.current-1,(i=this.panels[this.current].$button)===null||i===void 0||i.focus(),s.preventDefault())},y={ArrowUp:v,ArrowRight:p,ArrowDown:p,ArrowLeft:v,Home:()=>{var i;(i=this.panels[0].$button)===null||i===void 0||i.focus(),s.preventDefault()},End:()=>{var i;(i=this.panels[this.panels.length-1].$button)===null||i===void 0||i.focus(),s.preventDefault()},default:()=>!1};return(y[m||w]||y.default)()},this.closeAll=()=>this.panels.forEach(s=>s.close()),this.el=e,this.options={...g,...t}}init(){return this.el!==null&&this.el!==void 0&&(this.accordions=[...this.el.children].filter(e=>e.classList.contains("js-accordion-panel")),this.accordions.forEach((e,t)=>{const s=new f(e);return s.init(),this.panels.push(s),e.addEventListener("Panel.open",()=>{this.current=t,this.options.multiselectable||this.closeAll()}),!0}),this.initEvents(),this.handleHashchange(),!0)}initEvents(){window.addEventListener("hashchange",this.handleHashchange),this.el.addEventListener("keydown",this.handleKeydown)}destroyAll(){return this.panels.forEach(e=>e.destroy()),this.panels=[],window.removeEventListener("hashchange",this.handleHashchange,!1),this.el.removeEventListener("keydown",this.handleKeydown),!0}}return h})())}(a)),a.exports}var L=O();const P=A(L);class x extends E{constructor(){super("Accordion")}mount(){this.accordion=new P(this),this.accordion.init()}}customElements.define("c-accordion-group",x);
